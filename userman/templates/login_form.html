{# Login form to be included in a page. #}

{% if not current_user %}

<p>
  {% module Icon('action') %}
  <a href="{{ reverse_url('user_create') }}">
    Create a new user account.
  </a>
</p>

<p>
  {% module Icon('action') %}
  <a href="{{ reverse_url('user_activate') }}">
    Activate a user account (after approval or password reset).
  </a>
</p>

<p>
  {% module Icon('action') %}
  <a href="{{ reverse_url('user_reset') }}">
    Reset the password of an account.
  </a>
</p>

{% end %}

<form action="{{ reverse_url('login') }}" method="POST">
  {% module xsrf_form_html() %}

  <fieldset>

    <legend>Login to an existing account</legend>

    <table class="fields">
      <tr>
	<th>Email or username</th>
	<td>{% module Icon('mandatory') %}</td>
	<td><input type="text" name="email" size="40"></td>
      </tr>

      <tr>
	<th>Password</th>
	<td>{% module Icon('mandatory') %}</td>
	<td><input type="password" name="password"></td>
      </tr>

      <tr>
	<th></th>
	<td></td>
	<td>
	  {% if next %}
	  <input type="hidden" name="next" value="{{ next }}">
	  {% end %}
	  {% module Submit('login') %}
	</td>
      </tr>
    </table>

  </fieldset>

</form>
